version: '3.1'
intents:
- affirm
- all_restaurant_list
- bot_challenge
- boroughs
- confirm_reservation
- confirm_review
- cuisine_form
- cuisine_list
- deny
- deny_reservation
- deny_review
- goodbye
- greet
- make_reservation_phone
- mood_bored
- mood_great
- mood_unhappy
- nlu_fallback
- reservation
- reservation_list
- reservation_past_list
- reservation_list_phone
- restaurant_info
- review
- set_date_for_reservation
- set_score
- set_people_number
- set_time_for_reservation
- show_all_reviews
- show_review
- start
- stop
- help_generic
- choose_help_category
- top_restaurant_list

entities:
- integer_number
- borough
- restaurant_name_reservation
- restaurant_name_info
- restaurant_name_review
- cuisine
- date
- time
- allergies
- name
- name_review
- phone_number
- review_body
- score_review
- help_category

slots:
  restaurant_name_info:
    type: text
    mappings:
    - type: from_text
      entity: restaurant_name_info
      conditions:
      - active_loop: info_restaurant_form
        requested_slot: restaurant_name_info
  restaurant_name_reservation:
    type: text
    mappings:
    - type: from_text
      entity: restaurant_name_reservation
      conditions:
      - active_loop: reservation_form
        requested_slot: restaurant_name_reservation
  people_number:
    type: any
    mappings:
    - type: from_entity
      entity: integer_number
      conditions:
      - active_loop: reservation_form
        requested_slot: people_number
  date:
    type: text
    mappings:
    - type: from_entity
      entity: date
      conditions:
      - active_loop: reservation_form
        requested_slot: date
  time:
    type: text
    mappings:
    - type: from_entity
      entity: time
      conditions:
      - active_loop: reservation_form
        requested_slot: time
  allergies:
    type: text
    mappings:
    - type: from_text
      entity: allergies
      conditions:
      - active_loop: reservation_form
        requested_slot: allergies
  name:
    type: text
    mappings:
    - type: from_text
      entity: name
      conditions:
      - active_loop: reservation_form
        requested_slot: name
  phone_number:
    type: text
    mappings:
    - type: from_entity
      entity: phone_number
      conditions:
      - active_loop: reservation_form
        requested_slot: phone_number
  review_body:
    type: text
    mappings:
    - type: from_text
      entity: review_body
      conditions:
      - active_loop: review_form
        requested_slot: review_body
  restaurant_name_review:
    type: text
    mappings:
    - type: from_text
      entity: restaurant_name_review
      conditions:
      - active_loop: review_form
        requested_slot: restaurant_name_review   
  name_review:
    type: text
    mappings:
    - type: from_text
      entity: name_review
      conditions:
      - active_loop: review_form
        requested_slot: name_review
  score_review:
    type: any
    mappings:
    - type: from_entity
      entity: integer_number
      conditions:
      - active_loop: review_form
        requested_slot: score_review
  restaurant_name_review_list:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: show_review_form
            requested_slot: restaurant_name_review_list
  cache_phone_number:
    type: text
    mappings:
      - type: from_entity
        entity: phone_number
        conditions:
          - active_loop: null
  help_category:
    type: text
    mappings:
      - type: from_text
        entity: help_category
        conditions:
          - active_loop: help_form
            requested_slot: help_category

forms:
  reservation_form:
    required_slots:
    - restaurant_name_reservation
    - people_number
    - date
    - time
    - allergies
    - name
    - phone_number
  info_restaurant_form:
    required_slots:
    - restaurant_name_info
  review_form:
    required_slots:
    - restaurant_name_review
    - name_review
    - score_review
    - review_body
  show_review_form:
    required_slots:
    - restaurant_name_review_list
  help_form:
    required_slots:
    - help_category

responses:
  utter_start:
  - text: Welcome guest, I am Restaurant Bot, the new amazing service to make reservations and leave reviews in NY restaurants. In order to help you, use the below buttons to start interacting
    buttons:
    - title: HELP
      payload: /help
    - title: RESTAURANTS
      payload: /top_restaurant_list
    - title: CUISINES
      payload: /cuisine_list
  utter_stop:
  - text: Thank you for choosing the service. Have a nice day!
  - text: I hope my help was useful. Bye, see you soon!
  utter_greet:
  - text: Hey! How are you?
  - text: Hey! What's up?
  utter_cheer_up:
  - text: 'Here is something to cheer you up:'
    image: https://i.imgur.com/nGF1K8f.jpg
  utter_did_that_help:
  - text: Did that help you?
  - text: Was it helpful?
  utter_happy:
  - text: "Great, carry on!"
  - text: "I'm happy to hear that!"
  utter_sad:
  - text: "I'm sorry..."
  - text: "I'll try to do better next time."
  utter_goodbye:
  - text: Bye
  - text: Goodbye
  utter_iamabot:
  - text: I am a bot, powered by Rasa.
  utter_ask_restaurant_name_info:
  - text: Which restaurant you want info about?
  - text: Tell me the name of the restaurant you want info about
  utter_submit_info:
  - text: Got it!
  - text: Done!
  utter_confirm_stop:
  - text: Do you want to stop the reservation process?
  - text: You really whant to cancel the reservation?
  utter_reservation_stopped:
  - text: The reservation has been cancelled. Do you need something else?
  - text: Done! Reservation process has been cancelled
  utter_ask_restaurant_name_reservation:
  - text: Tell me the restaurant name for the reservation
  - text: Which restaurant do you want to book at?
  utter_ask_people_number:
  - text: How many people would you like to reserve for?
  - text: Please, tell me how many people will you be
  utter_ask_date:
  - text: 'On what date would you like to make the reservation? Date must be given in one of this format: YYYY-mm-dd, YYYYmmdd, YYYY/mm/dd, dd-mm-YYYY, dd/mm/YYYY'
  - text: 'Please, give me a date for the reservation. Date must be given in one of this format: YYYY-mm-dd, YYYYmmdd, YYYY/mm/dd, dd-mm-YYYY, dd/mm/YYYY'
  utter_ask_time:
  - text: 'What time would you like to make the reservation? time must be in this format: hh:mm'
  - text: 'When do you plan to eat? Time must be in this format: hh:mm'
  utter_ask_allergies:
  - text: Do you have any allergies?
  - text: Got some allergies?
  utter_ask_name:
  - text: Please, may you tell me your name for the reservation?
  - text: Can you please leave a name for the reservation?
  utter_ask_phone_number:
  - text: What is your phone number?
  - text: Please, can you leave your phone number for the reservation?
  utter_respond_reservations:
  - text: "Sure! tell me your phone number to get your reservation"
  - text: I need you phone number to find the reservations, please give it to me

  utter_help:
    - text: |
            I can help you decide where to go eat! You can ask me multiple things.
            You can ask me info about restaurants in the NY area. Specifically, you can ask me:
              -The list of all the restaurants in the area.
              -All of the possibile cuisine types you can choose from.
              -Which restaurants offer a specific type of cuisine.
              -Info about a restaurant you're curious of.
            You can then ask me to reserve a place in a restaurant of you choice! For that I will need some information:
              -In which place you want to go, of course.
              -How many people you want to reserve for.
              -The date of the reservation.
              -At what time you would like to go eat.
              -Whether you suffer from some allergies.
              -Your name.
              -Your phone number.
            Once you've made one or more reservations, you can also ask me to remind you of them.
            I hope that I was clear enough!

  utter_ask_reservation_confirm:
  - text: Do you confirm your reservation?
    buttons:
    - title: YES
      payload: /confirm_reservation
    - title: NO
      payload: /deny_reservation
  utter_confirm_reservation:
  - text: Well done! your resevation has been confirmed
  - text: done, reservation accepted!
  utter_deny_reservation:
  - text: Ok, reservation has been cancelled
  - text: Done, i've cancelled the reservation
  utter_ask_restaurant_name_review:
  - text: Which restaurant would you like to review?
  utter_ask_review_body:
  - text: Please give us your review, we really value your feedback!
  - text: If you want leave a review, we really appreciate that
  utter_ask_name_review:
  - text: Please, may you tell me your name for the review?
  - text: Leave a name for the review
  utter_ask_score_review:
  - text: From 1-5, how would you rate your experience at {restaurant_name_review}?
  - text: Please, rate you exeperience at {restaurant_name_review} from 1-5
  utter_ask_restaurant_name_review_list:
  - text: Which restaurant do you want to read reviews about?
  utter_need_something_else:
  - text: I'm here if you need something else!
  - text: If you still need me i'm here, ask anything you want!
  - text: In case you need something else feel free to tell me everything
  utter_help_generic:
    - text: |
            I can help you decide where to go eat! you can ask me multiple things.
              - you can ask me info about restaurants in the ny area.
              - you can then ask me to reserve a place in a restaurant of you choice!
              - and finally, after you've had your meal, you can leave a review for the other users to read.
            Do you need more information on one of these functionalities?
  utter_help_which_type:
    - text: With what you need help? choose between "info", "reserve", and "review".
    - text: You need help about "info", "reserve" or "review"?
  utter_review_stopped:
  - text: Your review has been cancelled
  - text: Ok, i cancelled your review request
  utter_ask_review_confirm:
    - text: Do you want to leave this review and this score?
      buttons:
        - title: YES
          payload: /confirm_review
        - title: NO
          payload: /deny_review
  utter_confirm_review:
    - text: Well done! your feedback is important for us! thank for improve other users experience!
    - text: Thank you for leaving a review, this will help to improve our service!
  utter_deny_review:
    - text: Review draft cancelled
    - text: Ok, you review draft has been cancelled
  utter_default_fallback:
    - text: Sorry, i didn't understand. can you repeat please?
    - text: I didn't catch what you said, please rephrase it.
    - text: Ops... i didn't understand you, repeat it pls
  utter_restaurant_not_registered:
    - text: Sorry but the restaurant {restaurant_nr} is not registered on the service
    - text: Restaurant {restaurant_nr} isn't registered, please give me a name of a registered restaurant

actions:
- action_clear_form_slots
- utter_reservation_stopped
- utter_confirm_stop
- utter_goodbye
- utter_start
- utter_stop
- utter_greet
- utter_cheer_up
- utter_did_that_help
- utter_happy
- utter_sad
- utter_help_generic
- utter_help_which_type
- utter_iamabot
- utter_need_something_else
- utter_ask_restaurant_name_info
- utter_ask_restaurant_name_reservation
- utter_submit_info
- utter_respond_reservations
- utter_ask_review_confirm
- utter_ask_reservation_confirm
- utter_confirm_reservation
- utter_ask_restaurant_name_review
- utter_ask_review_body
- utter_confirm_review
- utter_ask_name_review
- utter_ask_score_review
- utter_deny_review
- utter_default_fallback
- action_top_restaurant_list
- action_all_restaurant_list
- action_info_restaurant
- action_reserve_table
- action_review_restaurant
- action_cuisines_list
- action_start
- action_get_restaurants_of_borough
- action_get_all_reviews_after_first
- action_get_all_reviews
- action_restaurant_cuisine
- action_get_active_reservations
- action_get_past_reservations
- action_get_reviews
- action_show_reservation_info
- action_show_review_info
- action_show_specific_help
- validate_info_restaurant_form
- validate_reservation_form
- validate_review_form
- validate_show_review_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
