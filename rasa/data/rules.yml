version: "3.1"



rules:
- rule: Start the conversation
  steps:
  - intent: start
  - action: action_start
  - action: utter_start

# - rule: End the conversation
#   steps:
#   - intent: stop
#   - action: utter_stop

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

# Rules for info function
- rule: show restaurant list
  steps:
    - intent: restaurant_list
    - action: action_restaurant_list

- rule: show cuisine list
  steps:
    - intent: cuisine_list
    - action: action_cuisines_list

- rule: restaurant of a cuisine
  steps:
    - intent: cuisine_form
    - action: action_restaurant_cuisine

- rule: Activate Restaurant Info Form
  steps:
  - intent: restaurant_info
  - action: info_restaurant_form
  - active_loop: info_restaurant_form

- rule: Submit Restaurant Info Form
  condition:
  - active_loop: info_restaurant_form
  steps:
  - action: info_restaurant_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_submit_info
  - action: action_info_restaurant

# Rules for reservation service
- rule: Active Reservation form
  steps:
    - intent: reservation
    - action: reservation_form
    - active_loop: reservation_form

- rule: Submit Reservation Form
  condition:
  - active_loop: reservation_form
  steps:
  - action: reservation_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_show_reservation_info
  - action: utter_ask_reservation_confirm
  - or:
    - intent: confirm_reservation
    - intent: affirm
  - action: action_reserve_table
  - action: utter_confirm_reservation

- rule: Delete Reservation Form
  condition:
  - active_loop: reservation_form
  steps:
  - action: reservation_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_show_reservation_info
  - action: utter_ask_reservation_confirm
  - or:
    - intent: deny_reservation
    - intent: deny
  - action: action_clear_form_slots
  - action: utter_goodbye

- rule: Asking for reservations
  steps:
    - intent: reservation_list
    - action: utter_respond_reservations

- rule: Phone number got
  steps:
    - intent: reservation_list_phone
    - action: action_get_reservations

# Rules for reviews
  - rule: review form
  steps:
    - intent: review
    - action: review_form
    - active_loop: review_form
    - active_loop: null
    - action: action_review_restaurant
    - action: utter_goodbye
	  
